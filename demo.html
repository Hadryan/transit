<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Transit: Backend agnostic content management with Backbone.js</title>
    <link rel="stylesheet" href="stylesheets/styles.css" />
    <link rel="stylesheet" href="stylesheets/transit.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="wrapper" class="wrapper">
        <a href="https://github.com/kurbmedia/transit" target="_blank"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
        <header id="heading">
            <h1>Transit</h1>
            <p>De-Coupled CMS with Backbone.js</p>
            <p class="view"><a href="https://github.com/kurbmedia/transit" target="_blank">View the Project on GitHub <small>kurbmedia/transit</small></a></p>
            <nav id="main_nav">
                <h5>Navigate</h5>
                <ul>
                    <li><a href="./">Home</a></li>
                    <li><a href="arch.html">Architecture</a></li>
                    <li><a href="interface.html">Interface</a></li>
                    <li class="active"><a href="demo.html">Try</a></li>
                </ul>
            </nav>
            <ul class="downloads">
                <li><a href="https://github.com/kurbmedia/transit/zipball/master" target="_blank">Download <strong>ZIP File</strong></a></li>
                <li><a href="https://github.com/kurbmedia/transit/tarball/master" target="_blank">Download <strong>TAR Ball</strong></a></li>
                <li><a href="https://github.com/kurbmedia/transit" target="_blank">View On <strong>GitHub</strong></a></li>
            </ul>
        </header>
        <section>
            <h1>Try It</h1>
            <p>The default interface uses <a href="http://twitter.github.com/bootstrap" target="_blank">Bootstrap</a> for the style and layout,
            but can easily be overridden via templates and css.</p>
            <p>The area below is managed by a "Page" deliverable. Check the source for more info.</p>
            
            <div id="region" class="managed-deliverable" data-deliverable-type="Page" data-deliverable-id="1234">
                <div class="managed-context" data-context-id="1" data-context-type="HeadingText">
                    <h3 class="subhead">This is the main heading.</h3>
                </div>
                <div class="managed-context text-block" data-context-id="2" data-context-type="TextBlock">
                    <p>This is some body copy, it is represented by paragraphs and basic text formatting.</p>
                </div>
            </div>
            
            <p>
                This demo is a work in progress... If you really want to try it...
                <a href="https://github.com/kurbmedia/transit" target="_blank">download it.</a>
            </p>
            
            <h3>Misc</h3>
            <ul id="testers">
                <li>
                    Open a modal window. [<a class="modal" href="#">Run it.</a>]
                    <pre class="prettyprint lang-javascript">Transit.modal({ title: "Title", content: "Content" });</pre>
                    
                </li>
                <li>
                    Add a new Panel [<a class="panel" href="#">Add it</a>]
<pre class="prettyprint lang-javascript">
var page    = new Transit.Deliverable(),
    manager = Transit.manage(page),
    panel   = new Transit.Panel({ title: 'New Panel' });

manager.add(panel);
</pre>
                </li>
                <li>
                    Show a notification
                    <pre class="prettyprint lang-javascript">Transit.notify(type, message);</pre>
                    <ul id="notice_testers">
                        <li><a class="success" href="#">Success message</a></li>
                        <li><a class="notice" href="#">Notice message</a></li>
                        <li><a class="error" href="#">Error message</a></li>
                    </ul>
                </li>
            </ul>
        </section>
        <footer>
            <h3>License</h3>
            <p>Transit is Â©2011-2012 kurb media, llc. Licensed under the <a href="http://en.wikipedia.org/wiki/MIT_License" target="_blank">MIT license</a>. Do whatever you'd like, 
            but contributing any cool features / functionality you may add would simply make you awesome.</p>
            
            <p>
                This project is maintained by <a href="https://github.com/kurbmedia" target="_blank">kurbmedia</a><br />
                <small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a></small>
            </p>
        </footer>
    </div>
    <script src="javascripts/prettify.js"></script>
    <script src="javascripts/lang.js"></script>
    <script src="javascripts/site.js"></script>
    <script src="javascripts/jquery-1.8.2.js" type="text/javascript"></script>
    <script src="javascripts/bootstrap.js" type="text/javascript"></script>
    <script src="javascripts/wysihtml5.js" type="text/javascript"></script>
    <script src="javascripts/underscore-1.3.3.js" type="text/javascript"></script>
    <script src="javascripts/backbone-0.9.2.js" type="text/javascript"></script>
    <script src="javascripts/handlebars-1.0.rc.1.js" type="text/javascript" charset="utf-8"></script>
    <script src="javascripts/transit.js" type="text/javascript"></script>
    <script src="javascripts/transit-bootstrap.js" type="text/javascript"></script>
    <script src="javascripts/extras/page.js" type="text/javascript"></script>
    <script src="javascripts/extras/heading_text.js" type="text/javascript"></script>
    <script src="javascripts/extras/text_block.js" type="text/javascript"></script>
    <script type="text/javascript" charset="utf-8">
    //<![CDATA[
        $(window).one('load', function(){
            var page, panel, content, assets, tester, manager;
            
            $('html').addClass('transit-ui-active');
            
            var template;
            
            Transit.on('ready', function(){
                page = new Page({
                    id: 1234,
                    contexts: [
                        {'_type': 'HeadingText', 'id':1, 'position':1, 'body' : "Main heading", 'node' : 'h3' },
                        {'_type': 'TextBlock', 'position': 2, 'id':2, 'body' : "<p>This is some body copy, it is represented by paragraphs and basic text formatting.</p>" }
                    ]
                });
                page.url  = "/";
                manager = Transit.manage(page);
                panel   = new Transit.Form({ model: page, title: 'Info', template: $('#page_form_template').html() });
                content = new Transit.Panel({ title: 'Content' });
                assets  = new Transit.AssetManager();
                manager.addTabs(panel, assets);
                
                window.page   = page;
                window.manage = manager;
                tester = new Transit.Panel({ title: 'New Panel' });
                manager.on('before:save', function(){
                   Transit.modal({
                       title: "Save Data",
                       content: "<pre class='prettyprint lang-json'>"+ JSON.stringify(page.toJSON(), null, 4).replace("<p>", "&lt;p&gt;").replace("</p>", "&lt;/p&gt;") +"</pre>"
                   });
                   prettyPrint();
                });
            });
            
            Transit.init();
            

            $('#link_tester').on('click', function(event){
                event.preventDefault();
                alert("link accessible.");
            });
            
            $('#testers a.modal').on('click', function(event){
               event.preventDefault();
               Transit.modal({ 
                   title: 'Modal Window Demo', 
                   content: $('#modal_test_content').html(),
                   buttons: [
                       { css: 'btn-primary', action: 'close', text: 'Close It' }
                   ]
               });
            });
            
            $('#testers a.panel').toggle(
                function(event){
                    event.preventDefault();
                    $(this).text('Remove it');
                    manager.addTabs(tester);
                },
                
                function(event){
                    event.preventDefault();
                    $(this).text('Add it');
                    manager.removeTabs(tester);
                }
            );
            
            $("#notice_testers").on('click', '> li a', function(event){
               event.preventDefault();
               var link = $(this);
               if( link.hasClass('success') ) Transit.notify('success', "This action was successful!");
               else if( link.hasClass('error') ) Transit.notify('error', "This action was a massive fail!");
               else if( link.hasClass('notice') ) Transit.notify('info', "This action wasn't really anything. It just is.");
            });
        });
    //]]>
    </script>
    <script type="text/plain" id="modal_test_content" charset="utf-8">
    This is the content within the modal window. It can be text, html etc. Buttons are added via a buttons option and trigger 
    application-wide events that you can listen to and handle.
    </script>
    
    <script type="text/plain" id="page_form_template" charset="utf-8">
    <div>
    <ul class="fields">
        <li>
            <label>Title</label>
            <input type="text" data-binding="title" name="title" value="{{title}}" />
        </li>
        <li>
            <label>Description</label>
            <input type="text" data-binding="description" name="description" value="{{description}}" />
        </li>
        <li>
            <label>Keywords</label>
            <input type="text" data-binding="keywords" name="title" value="{{keywords}}" />
        </li>
    </ul>
    </div>
    </script>
  </body>
</html>